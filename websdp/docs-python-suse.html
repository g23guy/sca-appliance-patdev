<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Python Library for SCA Patterns</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:none" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#constants">CONSTANTS</a></li>
	<li><a href="#functions">FUNCTIONS</a></li>
	<ul>

		<li><a href="#packageinstalled_packagename_">packageInstalled(PackageName)</a></li>
		<li><a href="#getrpminfo_packagename_">getRpmInfo(PackageName)</a></li>
		<li><a href="#getdriverinfo_driver_name_">getDriverInfo(DRIVER_NAME)</a></li>
		<li><a href="#comparerpm_package__versionstring_">compareRPM(package, versionString)</a></li>
		<li><a href="#comparekernel_kernelverion_">compareKernel(kernelVerion)</a></li>
		<li><a href="#getscinfo___">getScInfo( )</a></li>
	</ul>

	<li><a href="#contributors">CONTRIBUTORS</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>SUSE.py</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>import SUSE</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>The Supportconfig Analysis Pattern library for Python on the SUSE OS</p>
<p>
</p>
<hr />
<h1><a name="constants">CONSTANTS</a></h1>
<p>SLE9GA
SLE9SP1
SLE9SP2
SLE9SP3
SLE9SP4
SLE9SP5
SLE10GA
SLE10SP1
SLE10SP2
SLE10SP3
SLE10SP4
SLE10SP5
SLE11GA
SLE11SP1
SLE11SP2
SLE11SP3
SLE11SP4
SLE12GA</p>
<p>
</p>
<hr />
<h1><a name="functions">FUNCTIONS</a></h1>
<p>
</p>
<h2><a name="packageinstalled_packagename_">packageInstalled(PackageName)</a></h2>
<dl>
<dt><strong><a name="description" class="item">Description</a></strong>

<dd>
<p>Checks if PackageName is installed</p>
</dd>
</li>
<dt><strong><a name="requires" class="item">Requires</a></strong>

<dd>
<p>The RPM package name</p>
</dd>
</li>
<dt><strong><a name="returns" class="item">Returns</a></strong>

<dd>
<p>True  if the RPM package is installed</p>
</dd>
<dd>
<p>False if the RPM package is not installed</p>
</dd>
</li>
<dt><strong><a name="example" class="item">Example</a></strong>

<dd>
<pre>
        PACKAGE = 'aaa_base'
        if( SUSE.packageInstalled(PACKAGE) ):
                Core.updateStatus(Core.WARN, &quot;Package is installed: &quot; + PACKAGE)
        else:
                Core.updateStatus(Core.ERROR, &quot;Package is NOT installed: &quot; + PACKAGE)</pre>
</dd>
</dl>
<hr><p>
</p>
<h2><a name="getrpminfo_packagename_">getRpmInfo(PackageName)</a></h2>
<dl>
<dt><strong><a name="description2" class="item">Description</a></strong>

<dd>
<p>Returns detailed information about PackageName</p>
</dd>
</li>
<dt><strong><a name="requires2" class="item">Requires</a></strong>

<dd>
<p>The RPM package name</p>
</dd>
</li>
<dt><strong><a name="returns2" class="item">Returns</a></strong>

<dd>
<p>A list with elements: <code>name(0)</code>, <code>version(1)</code>, <code>vendor(2)</code>, install <code>time(3)</code></p>
</dd>
</li>
<dt><strong><a name="example2" class="item">Example</a></strong>

<dd>
<pre>
        PACKAGE = 'aaa_base'
        VERSION = 1
        RPM_INFO = SUSE.getRpmInfo(PACKAGE)
        if( len(RPM_INFO) &gt; 0 ):
                Core.updateStatus(Core.WARN, &quot;Package installed: &quot; + PACKAGE + &quot;, with version: &quot; + RPM_INFO[VERSION])
        else:
                Core.updateStatus(Core.ERROR, &quot;Package is NOT installed: &quot; + PACKAGE)</pre>
</dd>
</dl>
<hr><p>
</p>
<h2><a name="getdriverinfo_driver_name_">getDriverInfo(DRIVER_NAME)</a></h2>
<dl>
<dt><strong><a name="description3" class="item">Description</a></strong>

<dd>
<p>Gets detailed information about the kernel DRIVER_NAME</p>
</dd>
</li>
<dt><strong><a name="requires3" class="item">Requires</a></strong>

<dd>
<p>The name of the kernel driver</p>
</dd>
</li>
<dt><strong><a name="returns3" class="item">Returns</a></strong>

<dd>
<p>A dictionary with elements: name loaded filename version license description srcversion supported vermagic</p>
</dd>
</li>
<dt><strong><a name="example3" class="item">Example</a></strong>

<dd>
<pre>
        DRIVER = 'cdrom'
        DRIVER_INFO = SUSE.getDriverInfo(DRIVER)
        if( DRIVER_INFO['loaded'] ):
                Core.updateStatus(Core.WARN, &quot;Driver &quot; + DRIVER_INFO['name'] + &quot; loaded, Supported = &quot; + DRIVER_INFO['supported'])
        else:
                Core.updateStatus(Core.ERROR, &quot;Driver &quot; + DRIVER_INFO['name'] + &quot; is not loaded&quot;)</pre>
</dd>
</dl>
<hr><p>
</p>
<h2><a name="comparerpm_package__versionstring_">compareRPM(package, versionString)</a></h2>
<dl>
<dt><strong><a name="description4" class="item">Description</a></strong>

<dd>
<p>Compares the RPM package version in supportconfig with the versionString specified</p>
</dd>
</li>
<dt><strong><a name="requires4" class="item">Requires</a></strong>

<dd>
<p>The package specified to be installed</p>
</dd>
<dd>
<p>The RPM package name to compare</p>
</dd>
<dd>
<p>An RPM version string to compare against</p>
</dd>
</li>
<dt><strong><a name="returns4" class="item">Returns</a></strong>

<dd>
<p>Returns -1 if package is older then versionString</p>
</dd>
<dd>
<p>Returns 0 if package is the same version as versionString</p>
</dd>
<dd>
<p>Returns 1 if package is newer then versionString</p>
</dd>
</li>
<dt><strong><a name="example4" class="item">Example</a></strong>

<dd>
<pre>
        PACKAGE = 'aaa_base'
        VERSION = '11-6.90.1'
        if( SUSE.packageInstalled(PACKAGE) ):
                RESULT = SUSE.compareRPM(PACKAGE, VERSION)
                if( RESULT &gt; 0 ):
                        Core.updateStatus(Core.SUCC, PACKAGE + &quot; is newer than &quot; + VERSION)
                elsif( RESULT &lt; 0 ):
                        Core.updateStatus(Core.WARN, PACKAGE + &quot; is older than &quot; + VERSION)
                else:
                        Core.updateStatus(Core.CRIT, PACKAGE + &quot; matches &quot; + VERSION)
        else:
                Core.updateStatus(Core.ERROR, &quot;Package is NOT installed: &quot; + PACKAGE)</pre>
</dd>
</dl>
<hr><p>
</p>
<h2><a name="comparekernel_kernelverion_">compareKernel(kernelVerion)</a></h2>
<dl>
<dt><strong><a name="description5" class="item">Description</a></strong>

<dd>
<p>Compares the kernel version to the kernelVersion string given</p>
</dd>
</li>
<dt><strong><a name="requires5" class="item">Requires</a></strong>

<dd>
<p>A kernel version string</p>
</dd>
</li>
<dt><strong><a name="returns5" class="item">Returns</a></strong>

<dd>
<p>Returns a -1 if kernel is older than kernelVersion</p>
</dd>
<dd>
<p>Returns a 0 if kernel is the same as kernelVersion</p>
</dd>
<dd>
<p>Returns a 1 if kernel is newer than kernelVersion</p>
</dd>
</li>
<dt><strong><a name="example5" class="item">Example</a></strong>

<dd>
<pre>
        if( SUSE.compareKernel(Core.SLE10SP4) &lt;= 0 ):
                Core.updateStatus(Core.WARN, &quot;General Support has ended for earlier SLES/SLED Versions&quot;)
        else:
                Core.updateStatus(Core.ERROR, &quot;System is supported, skipping test&quot;)</pre>
</dd>
</dl>
<hr><p>
</p>
<h2><a name="getscinfo___">getScInfo( )</a></h2>
<dl>
<dt><strong><a name="description6" class="item">Description</a></strong>

<dd>
<p>Gets detailed information about supportconfig</p>
</dd>
</li>
<dt><strong><a name="requires6" class="item">Requires</a></strong>

<dd>
<p>Nothing</p>
</dd>
</li>
<dt><strong><a name="returns6" class="item">Returns</a></strong>

<dd>
<p>A list with elements: <code>envalve(0)</code> <code>kernvalue(1)</code> <code>cmdline(2)</code> <code>config(3)</code> <code>version(4)</code> <code>scriptdate(5)</code></p>
</dd>
</li>
<dt><strong><a name="example6" class="item">Example</a></strong>

<dd>
<pre>
        SC_INFO = SUSE.getScInfo()
        VERSION_FOUND = 4
        VERSION_REQUIRED = '2.25-372'
        if( Core.compareVersions(SC_INFO[VERSION_FOUND], VERSION_REQUIRED) &lt; 0 ):
                Core.updateStatus(Core.WARN, &quot;Insufficient supportconfig version: &quot; + SC_INFO[VERSION_FOUND])
        else:
                Core.updateStatus(Core.ERROR, &quot;Supportconfig version is sufficient, skipping test&quot;)</pre>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="contributors">CONTRIBUTORS</a></h1>
<pre>
        David Hamner (dhamner@novell.com)
        Jason Record (jrecord@suse.com)</pre>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>Copyright (C) 2013 SUSE LLC</p>
<p>This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; version 2 of the License.</p>
<p>This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</p>

</body>

</html>
